<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒêƒÉng k√Ω Clan TF</title>
<style>
:root { --accent:#ff3d00; --bg:#0f1724; --card:#161e2f; }
body { font-family:'Montserrat',sans-serif; background:var(--bg); color:#e6eef8; text-align:center; margin:0; padding:40px 15px; }
h1 { color:var(--accent); font-family:'Orbitron',sans-serif; text-transform:uppercase; margin-bottom:10px; }
p { color:#b3bcc8; margin-bottom:30px; }
.buttons { display:flex; justify-content:center; gap:20px; flex-wrap:wrap; margin-bottom:30px; }
button.group-btn { background:var(--accent); border:none; color:#fff; padding:12px 20px; border-radius:8px; font-weight:700; cursor:pointer; transition:0.3s; }
button.group-btn:hover { background:#ff1744; transform:scale(1.05); }
form { max-width:400px; margin:0 auto; background:var(--card); padding:25px; border-radius:12px; box-shadow:0 0 15px rgba(255,61,0,0.4); border:2px solid var(--accent); text-align:left; display:none; }
form.active { display:block; }
label { display:block; margin-bottom:6px; color:#fff; font-weight:600; }
input, select, textarea { width:100%; padding:10px; margin-bottom:15px; border-radius:6px; border:none; font-size:14px; }
button.submit-btn { background:var(--accent); color:#fff; border:none; padding:12px 25px; border-radius:8px; font-weight:700; cursor:pointer; width:100%; transition:0.3s; }
button.submit-btn:hover { background:#ff1744; transform:scale(1.03); }
.success{color:#4CAF50;text-align:center;margin-top:20px;font-weight:bold;}
.error{color:#f44336;text-align:center;margin-top:20px;font-weight:bold;}
table { width:100%; border-collapse:collapse; margin-top:30px; }
th, td { padding:10px; border:1px solid #e6eef8; font-size:14px; text-align:center; }
th { background:var(--accent); color:#fff; }
#filterGroup { margin-top:20px; padding:8px; border-radius:6px; border:none; font-size:14px; }
</style>
</head>
<body>

<h1>ƒêƒÉng k√Ω Clan TF</h1>
<p>Ch·ªçn nh√≥m mu·ªën gia nh·∫≠p v√† ƒëi·ªÅn th√¥ng tin!</p>

<div class="buttons">
  <button class="group-btn" onclick="showForm('sinhTonForm')">1Ô∏è‚É£ Sinh T·ªìn</button>
  <button class="group-btn" onclick="showForm('soloForm')">2Ô∏è‚É£ Solo T·ª≠ Chi·∫øn</button>
  <button class="group-btn" onclick="window.location.href='index.html'">üîô Trang Ch·ªß</button>
</div>


<form id="sinhTonForm">
  <h2>üî• Nh√≥m Sinh T·ªìn</h2>
  <input type="hidden" name="entry.group" value="Sinh T·ªìn">
  <label>T√™n trong game:</label><input type="text" name="entry.name" required>
  <label>UID:</label><input type="text" name="entry.uid" required>
  <label>Rank hi·ªán t·∫°i:</label>
  <select name="entry.rank" required>
    <option value="">-- Ch·ªçn Rank --</option>
    <option>Kim C∆∞∆°ng</option>
    <option>Tinh Anh</option>
    <option>Cao Th·ªß</option>
    <option>Huy·ªÅn Tho·∫°i</option>
  </select>
  <label>Vai tr√≤ mong mu·ªën:</label>
  <select name="entry.role" required>
    <option value="">-- Ch·ªçn Vai Tr√≤ --</option>
    <option>Rush</option>
    <option>Cover</option>
    <option>Sniper</option>
    <option>H·ªó tr·ª£</option>
  </select>
  <label>L√Ω do mu·ªën gia nh·∫≠p (tu·ª≥ ch·ªçn):</label>
  <textarea name="entry.reason" rows="3"></textarea>
  <label>Li√™n k·∫øt Facebook (tu·ª≥ ch·ªçn):</label>
  <input type="url" name="entry.facebook" placeholder="https://facebook.com/username">
  <button type="submit" class="submit-btn">üöÄ G·ª≠i ƒëƒÉng k√Ω</button>
</form>

<form id="soloForm">
  <h2>‚ö° Nh√≥m Solo</h2>
  <input type="hidden" name="entry.group" value="Solo T·ª≠ Chi·∫øn">
  <label>T√™n trong game:</label><input type="text" name="entry.name" required>
  <label>UID:</label><input type="text" name="entry.uid" required>
  <label>Rank hi·ªán t·∫°i:</label>
  <select name="entry.rank" required>
    <option value="">-- Ch·ªçn Rank --</option>
    <option>Kim C∆∞∆°ng</option>
    <option>Tinh Anh</option>
    <option>Cao Th·ªß</option>
    <option>Huy·ªÅn Tho·∫°i</option>
  </select>
  <label>Vai tr√≤ mong mu·ªën:</label>
  <select name="entry.role" required>
    <option value="">-- Ch·ªçn Vai Tr√≤ --</option>
    <option>Rush</option>
    <option>Cover</option>
    <option>Sniper</option>
    <option>H·ªó tr·ª£</option>
  </select>
  <label>L√Ω do mu·ªën gia nh·∫≠p (tu·ª≥ ch·ªçn):</label>
  <textarea name="entry.reason" rows="3"></textarea>
  <label>Li√™n k·∫øt Facebook (tu·ª≥ ch·ªçn):</label>
  <input type="url" name="entry.facebook" placeholder="https://facebook.com/username">
  <button type="submit" class="submit-btn">üöÄ G·ª≠i ƒëƒÉng k√Ω</button>
</form>

<div id="message"></div>

<select id="filterGroup">
  <option value="">-- L·ªçc theo nh√≥m --</option>
  <option value="Sinh T·ªìn">Sinh T·ªìn</option>
  <option value="Solo T·ª≠ Chi·∫øn">Solo T·ª≠ Chi·∫øn</option>
</select>

<table id="memberTable">
  <thead>
    <tr>
      <th>Th·ªùi gian</th>
      <th>Nh√≥m</th>
      <th>T√™n</th>
      <th>UID</th>
      <th>Rank</th>
      <th>Vai tr√≤</th>
      <th>L√Ω do</th>
      <th>Facebook</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
function showForm(id){
  document.getElementById('sinhTonForm').classList.remove('active');
  document.getElementById('soloForm').classList.remove('active');
  document.getElementById(id).classList.add('active');
  document.getElementById('message').innerHTML = '';
}

// Thay b·∫±ng URL Web App c·ªßa b·∫°n
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxiK-0wBZtgiG3L1wybhfhiisNLX5qmv4QvTOiKPi-nvaDfKPhVi78-1HtciyUkA2fj/exec";

['sinhTonForm','soloForm'].forEach(f => {
  const form = document.getElementById(f);
  form.addEventListener("submit", async e => {
    e.preventDefault();
    const data = new FormData(form);
    const msg = document.getElementById('message');
    msg.innerHTML = "‚è≥ ƒêang g·ª≠i...";
    try {
      await fetch(WEB_APP_URL, { method: "POST", body: data, mode: "no-cors" });
      msg.innerHTML = `<p class='success'>‚úÖ G·ª≠i th√†nh c√¥ng! C·∫£m ∆°n b·∫°n üòé</p>`;
      form.reset();
      loadMembers(document.getElementById('filterGroup').value || '');
    } catch (err) {
      console.error(err);
      msg.innerHTML = `<p class='error'>‚ùå G·ª≠i th·∫•t b·∫°i! H√£y th·ª≠ l·∫°i.</p>`;
    }
  });
});

// T·∫£i danh s√°ch th√†nh vi√™n t·ª´ Sheet
async function loadMembers(group = '') {
  try {
    const res = await fetch(WEB_APP_URL);
    const data = await res.json();
    const tbody = document.querySelector("#memberTable tbody");
    tbody.innerHTML = '';
    data
      .filter(d => !group || d.group === group)
      .forEach(d => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${new Date(d.time).toLocaleString()}</td>
          <td>${d.group}</td>
          <td>${d.name}</td>
          <td>${d.uid}</td>
          <td>${d.rank}</td>
          <td>${d.role}</td>
          <td>${d.reason || ''}</td>
          <td>${d.facebook || ''}</td>
        `;
        tbody.appendChild(tr);
      });
  } catch(err) {
    console.error("L·ªói t·∫£i danh s√°ch:", err);
  }
}

// Load danh s√°ch khi m·ªü trang
loadMembers();

// L·ªçc theo nh√≥m
document.getElementById('filterGroup').addEventListener('change', (e) => {
  loadMembers(e.target.value);
});
</script>

</body>
</html>
